xøøøxxxxxxõõõõõõõõõõõõããã$(function(){
    
    $("#createProjectBtn").click(function(){
        showProjectForm();
    });
    
    $("button[projectid]").click(function(){
        var projectId = $(this).attr('projectid');
       getProjectFromServer(projectId,function(data){
           showProjectForm(data);
        }); 
    });

    function getProjectFromServer(projectId,callback){
        var url ="/project";
        
        $.ajax({
            type:"GET",
            url:url,
            data:{
                projectId:projectId
            },
            success:function(data){
                callback(data);     
               
            }
        });
    }
    
    function showProjectForm(opt)
    {
        if(opt){
            var form = $("#project form")[0];
            form.elements.projectId.value=opt['projectId'] || "";
            form.elements.projectName.value=opt['name']||'';
            var domains = form.elements["rewrite[][domain]"] ;
            var paths = form.elements["rewrite[][path]"];
            var i=0, rew = opt.rewrite;
            for(var p in rew){
                domains[i].value =  p;
                paths[i].value = rew[p];
                i++;
            }
            for(;i<10;i++){
                domains[i].parentNode.parentNode.style.display="none";
            } 
        }
        
        $("#project").show();
    }    

});
